= SSL =

  * Create a certificate. We use this guide: http://wiki.rnp.br/pages/viewpage.action?pageId=41616278 (sections 1 and 2.4)
  * Apache:
    * Default configuration file (port 80):
      * sudo vim /etc/apache2/sites-enabled/mconf-web
      * content: https://github.com/mconf/mconf-web/blob/cancan/config/apache2_shib_default.example
    * Mconf-Web's configuration file (port 443):
      * sudo vim /etc/apache2/sites-enabled/mconf-web-ssl
      * content: https://github.com/mconf/mconf-web/blob/cancan/config/apache2_shib_mconf.example
      * Replace `/somewhere/public`, `YOUR_IP`, `YOUR_CERT`, `YOUR_CERT_KEY`.
      * The block `<Location /secure>` is not needed yet.

    * Modules:
{{{
sudo a2enmod ssl
sudo a2enmod rewrite
}}}
    * Enable: `sudo a2ensite mconf-web-ssl`
    * Restart: `sudo service apache2 restart`

  * Enable the `ssl` option in Mconf-Web:
    * Set it in the management page; or
    * By command line in case the site doesn't work:
{{{
./script/rails runner -e production "Site.current.update_attributes(:ssl => true)"
}}}


= Shibboleth = 

Instalar o SP no servidor. Seguir manual da instituição alvo, a gente usa o da CAFe:

Guide: http://wiki.rnp.br/display/cafewebsite/Roteiro+de+Atividades+para+Entrada+de+um+SP

Steps:
  * Basic Ubuntu setup: http://wiki.rnp.br/pages/viewpage.action?pageId=41616299
  * Certificate: http://wiki.rnp.br/pages/viewpage.action?pageId=41616278
  * SP: http://wiki.rnp.br/pages/viewpage.action?pageId=41616305


Comentar sobre as configurações finais do apache como devem ficar
  - apontar pros arquivos no repo

Como habilitar os sites:
  a2ensite mconf-web-ssl

Habilitar o SSL no portal:
  * pela interface (antes de setar o ssl, senão não funciona)
  * por linha de comando
    * ./script/rails runner -e production "Site.current.update_attributes(:ssl => true)"

Habilitar o Shibboleth:
  * Como habilitar no site
    * Sobre os campos email e nome
  

Alguns comentários sobre como funciona internamente