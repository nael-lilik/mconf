_*Notice:* If you're already using the Mconf VM, please send us feedback! You can contact us at our mailing list: mconf-dev@googlegroups.com (or directly at mconf.prav@gmail.com if you don't want to join the mailing list)._

<wiki:toc max_depth="2" />

= Mconf VM =

The Mconf VM comes with the whole Mconf package in a single virtual machine, to enable easy access to all Mconf's features. This VM is intended for *testing/development* purposes, it is not recommended for a production environment (see more [MconfVM#VM_for_development_and_testing here]).

This VM was created installing Mconf in the !BigBlueButton VM ([http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM see their wiki page]). It comes with [MconfWeb Mconf-Web], !BigBlueButton (0.71a) and [MconfBBB our customizations] already installed. All you need is to configure them (see below how to do that). The server is already enabled to be used with [MconfMobile Mconf-Mobile], so you can just [MconfMobile install Mconf-Mobile] in your mobile device and use it with this VM.

For other options on how to install and use Mconf see [MconfInstallation this page].

== Prerequisites ==

  * VMWare Player (or VMWare Workstation) for Windows or Unix, or VM Fusion for Mac. Or you can also use !VirtualBox ([https://www.virtualbox.org/wiki/Downloads link]).
  * Network access: you must have an IP defined for your network interface (can be either static or dynamic).

== Downloading and installing the Mconf VM ==

Follow the steps below to setup the Mconf VM. It will take around 10 minutes:

  * *Download*:

    Download the last version of the VM and unzip it.

    Current release: "0.2" [http://sourceforge.net/projects/mconf/files/vm/mconf-vm-0.2.zip/download download link] (2.5 GB)
     * To run on VMWare, install the VMPlayer and run the file `mconf-vm-0.2.vmx`.
     * To run on !VirtualBox you can follow [http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVMVirtualBox this guide] in the !BigBlueButton wiki.

  * *Login*:

    Use the username "`firstuser`" and password "`default`". You will be prompted to change your password. Enter "default" once again and then enter the new password *twice*.

  * *Acquire an IP*:

    <font color=red>Important: </font>Before trying to acquire an IP, make sure the networking is set to Bridged in VMWare Player (or in the !VirtualBox player), not NAT ([VMBridgedMode how to]]).

    After the login, make sure your virtual machine has an IP address. If your network has a DHCP server, just run the "dhclient" command and you might receive an IP address:
    {{{
sudo dhclient
    }}}

  * *Setup Mconf*:

    After the login, run the setup script with:
    {{{
./mconf-vm
    }}}

    When it runs, you will be immediately prompted for a password to run commands as root. Type in the new password you just configured for your account. The script will then start configuring Mconf's customizations to this !BigBlueButton instance and then will start setting up Mconf-Web.

    You can read more about this script in the end of this page.

  * *Login in Mconf-Web:*

    When the setup finishes, it will print in the screen your IP and ask you to access it using your browser to test if the setup was successful. Access it from your browser and log in into Mconf-Web using the default administrator account:
    {{{
username: admin
password: admin
    }}}

    <font color=red>Note: </font>The first time you access the website after restarting it, it should take several seconds to load the page. This is normal, it's the time required for the Rails environment to be loaded.

  * *Configure Mconf-Web:*

    The first time you setup the VM you'll need to configure Mconf-Web. You need, for instance, to setup an email and password that will be used to send emails from Mconf-Web. If you don't do it, people won't be able to use the website properly! (the users receive a confirmation email when they register in the website and they need to answer it).

    <img src="https://lh4.googleusercontent.com/-0fVt1zMy8yI/TrQavGKbZzI/AAAAAAAAAk4/H43eFgDFrCg/s657/site-show.png" width="219" height="171" alt="Mconf-Web management page" title="Mconf-Web management page">

    To configure Mconf-Web, see [MconfWebConfiguring this page].

  * *Finished!*

    Hopefully everything will work well, but if you're facing any problems you can try to find an answer in the [MconfTroubleshoot troubleshoot page] or send a message to our mailing list: mconf-dev@googlegroups.com


== Details about the VM ==

The Mconf VM runs over the [http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM BigBlueButton VM] (Ubuntu 10.04). What you have in this machine:

  * !BigBlueButton 0.71a installed from Ubuntu packages
  * !BigBlueButton's source code with [MconfBBB Mconf's customizations], from our repository at https://github.com/mconf/bigbluebutton
  * [MconfWeb Mconf-Web] production environment

This VM comes with the entire system already pre-configured, but there are still some things that are related to each instance of the VM. That's why `mconf-vm` exists, to help you configure these parameters.


=== VM for development and testing ===

This virtual machine was created to allow people to easily develop and test Mconf. We don't recommend the use of this virtual machine in a production environment for some reasons:

  * Performance. The amount of possible concurrent connections in !BigBlueButton depends on the performance of the server in which it is installed. The performance of both !BigBlueButton and Mconf-Web will certainly be better in a physical machine.
  * Mconf-Web and !BigBlueButton in the same machine. We recommend the installation of these components in separate machines to obtain the best performance from both. Also, Mconf-Web will use the port 80 and so !BigBlueButton will not have tunneling enabled ([MconfWebDeployInBBBMachine see more]).
  * Mconf-Web has a database where all the information it needs is stored, including. all users, communities, and attachments. Usually you will want to store this database in a very reliable place.
  * The VM has the !BigBlueButton development environment installed. You don't need it in a production server.


=== The script `mconf-vm` ===

The script `mconf-vm` does the minimum necessary to setup the already pre-installed softwares !BigBlueButton and Mconf-Web. In short, the script does the following:

  * Configure !BigBlueButton with the VM's IP and a new port (since Mconf-Web will run in the port 80);
  * Set a new salt for !BigBlueButton;
  * Configure Mconf-Web to use this !BigBlueButton instance as the default webconference server;
  * Setup the Mconf-Web database (only if the option --setip was *not* passed; see more about it below);
  * Start Mconf-Web.

The script will automatically detect your IP and use it. To be able to run !BigBlueButton and Mconf-Web together, !BigBlueButton will respond in the port 8888. You can also force an IP (or domain name) and a different port for !BigBlueButton, see the examples below:

{{{
./mconf-vm -a 192.168.0.100
./mconf-vm -a 192.168.0.100 -p 1234
./mconf-vm -a my.domain.com -p 8585
}}}


You can find the latest version of the script in [https://github.com/mconf/installation-scripts this repository].


=== Changing the IP ===

Later on, if you changed the IP of your machine and you need to reconfigure Mconf, use this script with the option `--setip`. The script will simply change the IP of !BigBlueButton, but it *will not* recreate Mconf-Web's database. You will also need to *manually* alter the address of your !BigBlueButton server in Mconf-Web (see [MconfWebConfiguring this page]).

{{{
./mconf-vm --setip
}}}



=== Where to find Mconf in the VM ===

  * !BigBlueButton is installed using Ubuntu packages (see [http://code.google.com/p/bigbluebutton/wiki/InstallationUbuntu this page]);
  * !BigBlueButton source code is checked out at `/home/firstuser/dev/source/bigbluebutton/`. We use it to customize !BigBlueButton (see [MconfBBB this page]). The following !BigBlueButton components are executed from their source code while the others are executed from the package installation:
    * bigbluebutton-client
    * bigbluebutton-apps
    * bbb-voice
  * Mconf-Web production environment is at `/home/firstuser/mconf-web/current/`. It is a git repository that was installed using `mconf-web-conf`. For more information on how it is used see [MconfWebDeploymentWithScript this page].


=== Passwords ===

Default passwords used in the VM:

  * Ubuntu user:
    * login: firstuser
    * password: default
  * MySQL user:
    * login: root
    * password: default
  * Mconf-Web default administrator:
    * login: admin
    * email: admin@default.com
    * password: admin