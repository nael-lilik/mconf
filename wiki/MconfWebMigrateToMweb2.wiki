*<font color=red>This is a draft, don't use it</font>*

= Migration to Mconf-Web 2 (using Capistrano) =

Update RVM (currently using 1.15.9):

{{{
curl -L https://get.rvm.io | sudo bash -s stable
}}}

Create the new folders:

{{{
bundle exec cap staging deploy:setup
}}}

On the server, move everything to `/var/www/mconf-web`:

{{{
cp -r ~/mconf-web/releases/* /var/www/mconf-web/releases/
cp -r ~/mconf-web/shared/* /var/www/mconf-web/shared/
rm -r ~/mconf-web
}}}

Fix permissions:

{{{
sudo chown -R mconf:www-data /var/www/mconf-web/
}}}

Update Mconf-Web's directory in Apache: `/etc/apache2/sites-enabled/mconf-web-ssl`

Update Passenger:

{{{
rvm use 1.9.3-p194@mconf
gem install passenger -v 3.0.17
rvmsudo passenger-install-apache2-module
rvmsudo passenger-install-apache2-module --snippet | sudo tee /etc/apache2/conf.d/mconf-passenger
}}}

Update the code:

{{{
bundle exec cap staging deploy:migrations
}}}

Restart:

{{{
sudo service apache2 restart
}}}