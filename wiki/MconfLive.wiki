= Mconf-Live =

Mconf-Live is an open source webconference system based on [http://bigbluebutton.org BigBlueButton]. It is part of the Mconf project, which includes a web portal in a social network format, a mobile client and a Global Webconference Network with load balancing, real-time monitor and usage reports.

This wiki aims to provide information on how to install Mconf-Live integrated to the Mconf Network, the documentation about all versions and the roadmap.

== Changelog ==

=== mconf-live0.2 (9th November 2012) ===
 * Source code: https://github.com/mconf/bigbluebutton/tree/mconf-live0.2
 * Based on !BigBlueButton 0.8
 * Layout manager - users can set pre-defined window layouts independently, and moderators can lock the layout of everyone in the session
 * Guest role - moderators must allow or deny the presence of a given user that tries to join a session as guest
 * Fully automation of the installation and updates of the software and configurations using Chef (http://www.opscode.com/chef/)

=== bbb0.8-mconf0.1 (May 2012) ===
 * Source code: https://github.com/mconf/bigbluebutton/tree/mconf-bbb0.8
 * Based on !BigBlueButton 0.8 Beta 2
 * Notes window, an area for text collaboration
 * Preliminary version of the layout manager - users can set pre-defined window layouts independently

== Roadmap ==

== Joining the Mconf Network ==

You can read about the Mconf Network at http://mconf.org/m/about/network.

=== Requirements ===

 * You must install it in a fresh Ubuntu Server 10.04 LTS installation. It won't work on any other linux distributions or Ubuntu versions;
 * The server must be dedicated to host the Mconf Node (it can be a VPS);
 * The server must fit the [http://code.google.com/p/bigbluebutton/wiki/FAQ#What_are_the_minimum_hardware_requirements_for_the_BigBlueButton BigBlueButton minimum hardware requirements];
 * Be sure that you have opened for external access the ports TCP 80 (HTTP), TCP 9123 (Desktop Sharing), TCP 1935 (RTMP), UDP 5060 (SIP) and UDP 16384-32768 (RTP);
 * Your server must answer ICMP (Ping), which is used to check if your server is UP or DOWN;
 * If you intend to use a domain name (like "mconf.org"), set that up before continuing;
 * Set the server hostname properly, since the hostname + domain will identify the server on Chef Server. Prefer a hostname like `mconf1-<institution-name>` or some other relevant name, and set it on both `/etc/hostname` and `/etc/hosts`. Reboot the server before continuing;
 * Set up the NTP service properly ([http://articles.slicehost.com/2010/11/8/using-ntp-to-sync-time-on-ubuntu see this link]).
.

=== Deployment ===

Mconf-Live is installed using the [http://www.opscode.com/chef/ Chef framework], and all the recipes used to deploy a Mconf Node are open source and available on !GitHub (https://github.com/mconf/chef-recipes). We do not provide any other way to install Mconf-Live without Chef, and this service is currently only available for the Mconf Network partners.

The first step is to fill the metadata presented below and send it to support AT mconf.org:

{{{
{
  "metadata": {
    "server_alias":"PRAV-UFRGS 1",
    "server_url":"http://mconf.org:8888",
    "server_hostname":"mconf-prav1",
    "server_location":"Porto Alegre-RS, Brazil",
    "institution_name":"GT-Mconf",
    "institution_website":"http://inf.ufrgs.br/prav/gtmconf",
    "institution_portal":"https://mconf.org",
    "responsible_name":"Felipe Cecagno",
    "responsible_email":"felipe AT mconf.org"
  }
}
}}}

 * `server_alias`: the alias for the server that will be presented on the [http://lb.mconf.org Mconf Load Balancer]
 * `server_url`: the URL for your server, including domain (or IP address, if it doesn't have a name) and port (when different than 80)
 * `server_hostname`: the hostname of the server, that can be checked on `/etc/hostname` - it identifies the server on Chef Server, as explained above
 * `server_location`: the high level location of the server (granularity of "city" is fine)
 * `institution_name`: name of the institution that is maintaining the server
 * `institution_website`: website of the institution
 * `institution_portal`: web portal used to access the webconference rooms - if your institution is using only the web portal mconf.org to access the conference rooms, leave it blank
 * `responsible_name`: the technician responsible for the server
 * `responsible_email`: e-mail contact of the responsible

*It is responsibility of all partners to keep the metadata of their servers updated.*

The second step is to install the Chef Client. For that we will send by e-mail a validation key, that will be used to register your server on the Mconf Chef Server. The validation key must be placed on *`/etc/chef/validation.pem`*.

If the given directory doesn't exist, create it. *Do not continue before receiving the validation key.*

Then copy the script below and paste it in a file named `install-mconf-chef.sh`:

{{{
#!/bin/bash

# install chef client v0.10.x on ubuntu server 10.04
echo "deb http://apt.opscode.com/ `lsb_release -cs`-0.10 main" | sudo tee /etc/apt/sources.list.d/opscode.list

sudo mkdir -p /etc/apt/trusted.gpg.d
gpg --keyserver keys.gnupg.net --recv-keys 83EF826A
gpg --export packages@opscode.com | sudo tee /etc/apt/trusted.gpg.d/opscode-keyring.gpg > /dev/null

sudo apt-get update
sudo apt-get install opscode-keyring -y --force-yes

# if a ruby version was previously installed, it's removed before install the chef-client
# this is because ruby 1.8.0 is a dependency of the package chef
sudo update-alternatives --remove ruby /usr/bin/ruby1.9.2
sudo dpkg -r ruby1.9.2

# install chef client via package passing the server url
echo "chef chef/chef_server_url string http://chef.mconf.org:4000" | sudo debconf-set-selections && sudo apt-get install chef -y
}}}

After that, your server will be registered on the Mconf Chef Server. Then we will assign the role "[https://github.com/mconf/chef-recipes/blob/master/roles/mconf-node.json mconf-node]" to your server, and both software and configuration will get installed and updated.

== Troubleshooting ==

The log generated by the Chef Client is placed on *`/var/log/chef/client.log`*.

For troubleshooting, please visit the mailing list (see [http://mconf.org/m/about/contact http://mconf.org/m/about/contact]) or send a message to support AT mconf.org.

== !BigBlueButton ==

!BigBlueButton (BBB) is the base webconferencing system used by Mconf. It is developed in Java and Flash, and is one of the best open source webconferencing softwares (if not the best) today.

  * [http://www.bigbluebutton.org/ BigBlueButton.org]
  * [http://code.google.com/p/bigbluebutton/ BigBlueButton at Google Code]