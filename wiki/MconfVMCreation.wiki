_<font color=red>This is a draft used for internal development only.</font>_

== For future releases ==

  * Provide only scripts? (not a VM with things pre-installed)
  * Fix mconf-web, installation-scripts and bigbluebutton versions (make tags)
  * Production only for Mconf-Web? (remove Capistrano, just release a single version)


== VM 0.1 ==

=== General ===

  * Ubuntu user:
    * login: firstuser
    * password: default
  * MySQL user:
    * login: root
    * password: default
  

=== Creating the VM ===

  * Download the BigBlueButton VM
    * http://sourceforge.net/projects/bigbluebutton/files/bigbluebutton071a-vm.zip/download

  * Install mconf-web
    * Installed (mostly) using mconf-web-conf. Used --install-ruby, --install-packages, --checkout, --setup-dev
    * Nginx was installed manually. It is still an issue because BBB uses the packaged nginx and we need another version (compile by Passenger)

  * Copy the installation scripts to the VM
    {{{
curl https://raw.github.com/mconf/installation-scripts/master/mconf-vm -o ~/mconf-vm
sudo curl https://raw.github.com/mconf/mconf-web/master/script/mconf-web-conf -o /usr/local/bin/mconf-web-conf
sudo curl https://raw.github.com/mconf/installation-scripts/master/mconf-bbb-conf -o /usr/local/bin/mconf-bbb-conf
sudo chmod a+x ~/mconf-vm
sudo chmod a+x /usr/local/bin/mconf-bbb-conf
sudo chmod a+x /usr/local/bin/mconf-web-conf
    }}}


=== Cleanup ===

  * Change MySQL root password to "default"
    {{{
mysqladmin -u root -p password default # type the current password
    }}}      

  * Delete mconf-web
    {{{
sudo rm -rf /home/firstuser/mconf-web
    }}}

  * Empty Mconf-Web DB
    {{{
mysql -u root -p
DROP DATABASE mconf_production;
exit;
    }}}

  * Clear logs and sqlites:
    {{{
rm /home/firstuser/dev/source/mconf-web/log/*
rm /home/firstuser/dev/source/mconf-web/db/*.sqlite3
    }}}

  * Use the standard configuration files
    {{{
cp ~/dev/source/mconf-web/config/setup_conf.yml.example ~/dev/source/mconf-web/config/setup_conf.yml
cp ~/dev/source/mconf-web/config/deploy/conf.yml.example ~/dev/source/mconf-web/config/deploy/conf.yml
    }}}

  * Configure database.yml
    {{{
cp ~/dev/source/mconf-web/config/database.yml.example ~/dev/source/mconf-web/config/database.yml
emacs ~/dev/source/mconf-web/config/database.yml
# user: root
# password: default
    }}}

  * Configure `deploy/conf.yml` with:
    {{{
server: "127.0.0.1"
user: "firstuser"
branch: "stable"
    }}}

  * Password
    * Change password to "default"
      {{{
sudo passwd -d firstuser
passwd firstuser # type "default" twice
      }}}
    * Make password expire on next login
      {{{
sudo passwd -e firstuser
      }}}

  * Remove bash history
    {{{
rm ~/.bash_history
    }}}

  * Erase useless files. Leave only:
    {{{
bigbluebutton-vm.vmx
disk0.vmdk
    }}}
  
  * Change the VM name:
    {{{
mv bigbluebutton-vm.vmx mconf-vm.vmx
    }}}