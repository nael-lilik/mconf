_*Notice:* If you're already using the Mconf VM, please send us feedback! You can contact us at our mailing list: mconf-dev@googlegroups.com (or directly at mconf.prav@gmail.com if you don't want to join the mailing list)._

<wiki:toc max_depth="2" />

= Mconf VM =

The Mconf VM comes with the whole Mconf package in a single virtual machine, to enable easy access to all Mconf's features. This VM is intended for *testing/development* purposes, it is not yet recommended for a production environment.

This VM was created installing Mconf in the !BigBlueButton VM ([http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM see their wiki page]). It comes with [MconfWeb Mconf-Web], !BigBlueButton (0.71a) and [MconfBBB our customizations] already installed. All you need is to configure them (see below how to do that). The server is already enabled to be used with [MconfMobile Mconf-Mobile], so you can just [MconfMobile install Mconf-Mobile] in your mobile device and use it with this VM.

For other options on how to install and use Mconf see [MconfInstallation this page].

== Prerequisites ==

  * VMWare Player (or VMWare Workstation) for Windows or Unix, or VM Fusion for Mac
  * A DHCP Server for the VM to acquire an IP address

== Installing the Mconf VM ==

Follow the steps below to setup the Mconf VM. It will take around 20 minutes (considering you can download files at ~150 KiB/s):

  * Download the last version of the VM, unzip and run the file `mconf-vm.vmx`
    * Current release: "0.1 beta1" [http://sourceforge.net/projects/mconf/files/vm/mconf-vm-0.1-beta1.zip/download download link] (2.9 GB)

  * Login using the username "`firstuser`" and password "`default`"
    * You will be prompted to change your password. Enter the "default" once and then enter the new password twice.

  * After the login, run the setup script with:
    {{{
./mconf-vm
    }}}

    _<b>Note</b>: read more about this script in the end of this page._

    When it runs, you will be immediately prompted for a password to run commands as root. Type in *the new password you just configured for your account*.

    The script will then start by applying Mconf's customizations to this !BigBlueButton instance (~8 minutes). 

    Some minutes later the script will start setting up Mconf-Web and it will ask you to configure some parameters. See the figure below:

    http://mconf.googlecode.com/svn/wiki/mconf-vm-setup1.png

    The parameters you will be asked for a value are:
      * *admin_email* (Admin user email): This is the email of the admin user in Mconf-Web. Use a valid email, you'll need it to administrate your server.
      * *admin_password* (Admin user password): The password for the admin user. You can set a password here our you can leave the default value and change it later using the website.
      * *sendmail_username* (Gmail account username): A Gmail account to be used to send any email sent from within Mconf-Web. Currently you need to set this account properly or the setup of Mconf-Web will fail.
      * *sendmail_password* (Gmail account password): The password of the Gmail account to send emails.

    Short after you will also be asked to enter a password for the deployment of Mconf-Web (image below). Enter *the password of your current user in the VM*. This is needed because the application is being deployed using ssh, so you're ssh'ing into your own machine.

    http://mconf.googlecode.com/svn/wiki/mconf-vm-setup2.png

  * Now just relax and wait for the setup to finish (~8 minutes).

  * When the setup finishes, it will print in the screen your IP and ask you to access it using your browser to test if the setup was successful. Hopefully everything will work well, but if you're facing any problems you can try to find an answer in the [MconfTroubleshoot troubleshoot page] or send a message to our mailing list: mconf-dev@googlegroups.com

== Updating the VM ==

We will provide instructions on how to update your VM when the next version is released.

== Details about the VM ==

The Mconf VM runs over the [http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM BigBlueButton VM] (Ubuntu 10.04). What you have in this machine:

  * !BigBlueButton 0.71a installed from Ubuntu packages
  * !BigBlueButton's source code with [MconfBBB Mconf's customizations], from our repository at https://github.com/mconf/bigbluebutton
  * [MconfWeb Mconf-Web] production and development environments

This VM comes with the entire system already pre-configured, but there are still some things that are related to each instance of the VM. That's why `mconf-vm` exists, to help you configure these parameters.

=== The script `mconf-vm` ===

The script does the following:

  * Acquires an IP with DHCP
  * Runs [MconfBBBInstallScript mconf-bbb-conf] to setup customizations over !BigBlueButton
  * Runs [MconfWebMconfWebConf mconf-web-conf] to setup Mconf-Web
  * Restarts nginx

The script will automatically detect your IP and use it. To be able to run !BigBlueButton and Mconf-Web together, !BigBlueButton will respond in the port 8888.

But you can also force an IP (or domain name) and a different port for !BigBlueButton, see the examples below:

{{{
./mconf-vm 192.168.0.100
./mconf-vm 192.168.0.100:1234
./mconf-vm my.domain.com:8585
}}}

You can run the script again if you need to, but be aware that it will clean your !BigBlueButton instance and reset Mconf-Web, *dropping and recreating the DB*.

You can find the latest version of the script in [https://github.com/mconf/installation-scripts this repository].

=== Directories ===

This is where you can find Mconf in your VM:

  * !BigBlueButton is installed using Ubuntu packages (see [http://code.google.com/p/bigbluebutton/wiki/InstallationUbuntu this page]);
  * !BigBlueButton source code is checked out at `/home/firstuser/dev/source/bigbluebutton/`. We use it to customize !BigBlueButton (see [MconfBBB this page]);
  * Mconf-Web source code (development environment) is checked out at `/home/firstuser/dev/source/mconf-web/`. It is used to deploy the application (see the next item) and you can also use it to develop;
  * Mconf-Web production environment is at `/home/firstuser/mconf-web/`. You shouldn't edit anything inside this folder directly. It is controlled by Capistrano from inside your development environment (see [MconfWebDeployment this page]).

=== Passwords ===

Default passwords used in the VM:

  * System user:
    * login: firstuser
    * password: default
  * MySQL user:
    * login: root
    * password: default