#summary Here you can find a list of possible problems in the setup, development, deployment or use of Mconf

= Mconf FAQ =

Our goal with this page is to have a central place where people can easily find tips and solutions to problems related to Mconf. If you did not find here what you were searching, contact us at our mailing list (mconf-dev@googlegroups.com) and we will try to answer your question and also improve this page.


<wiki:toc />


== Mconf-Web ==

=== Emails are not being sent ===

Briefly, this is how emails are sent in Mconf-Web:

The "`site`" table has the columns "`email`" and "`email_password`" that store a Gmail email address and the password for this email. You can configure them in the [MconfWebConfiguring management page]. This email will be used to send all emails from within Mconf-Web. Currently only Gmail accounts are supported (unless you're willing to do some coding).

When an email needs to be sent, a "job" is stored in the database and an external process (a gem called "`delayed_job`") will read the job and deliver the email. This process is monitored by another gem called "`god`", that is also responsible for starting it. So you don't ever need to deal with `delayed_job`, only with `god`.


To know how to use `god`, see [MconfWebDeploymentInstallGod this page]. Once you have it installed, you can try to stop it, restart and check the log in case of errors:

{{{
sudo /etc/init.d/god terminate
sudo /etc/init.d/god start

# This is the default log file. Check the script /etc/init.d/god in case it doesn't exists.
tail -100 /var/log/god.log
}}}


Also, sometimes god might start but delayed_job won't. You can see the delayed_job log files at:

{{{
<your-mconf-directory>/log/god_delayed_job.0.log
<your-mconf-directory>/log/god_delayed_job.1.log
}}}

These directories are defined in the delayed_job config file. You can see this file [https://github.com/mconf/mconf-web/blob/master/config/god/delayed_job.god clicking here] and in your machine it should be at:

{{{
/etc/god/conf.d/delayed_job.god
}}}

If you're in a *development* environment, you don't need `god`. Just run `delayed_job` with:

{{{
bundle exec script/delayed_job -n 2 start
}}}


If you're using *Capistrano*, whenever you update the code in your deployment server, `delayed_job` will be restarted to reload the modified code. You can also use some rake tasks to check whether `delayed_job` is working or not:

{{{
cap production rake:invoke TASK=jobs:queued # prints the queued jobs
}}}



=== Wrong username and/or password for MySQL ===

The following box shows an example of an error that occurs when your Mysql2 user and/or password are wrong and you're trying to setup Mconf-Web. The following error has happened trying to setup a production environment using the wrong database password for the user "root".

{{{
Couldn't drop mconf_production : #<Mysql2::Error: Access denied for user 'root'@'localhost' (using password: YES)>
* Running the task: db:create
Access denied for user 'root'@'localhost' (using password: YES).
Please provide the root password for your mysql installation
}}}

The database username and password are configured in the file `config/database.yml`. See more about this file [MconfWebSetupConf#Configuring_the_database_(_database.yml_) at this page].

If you haven't set up a password for mysql yet, you can do it with:

{{{
mysqladmin -u root password "NEW-PASSWORD"
}}}

Or, in case you want to change the password:

{{{
mysqladmin -u root -p password "NEW-PASSWORD"
}}}

=== Problems related to Capistrano ===

==== `Net::SSH::AuthenticationFailed` ====

If you're getting the an error similar to the following:

{{{
connection failed for: 127.0.0.1 (Net::SSH::AuthenticationFailed:mconf)
}}}

You're probably trying to setup a production environment and there's a problem in the SSH connection between your development and production environments, since Capistrano can't establish a connection.

The most common error is that you're trying to deploy using an user that doesn't exists in your server. Take a look at the file `config/deploy/conf.yml` and check the user configured to be used to deploy.
For instance, in case you're using the !BigBlueButton VM you should change the "user" parameter to "firstuser", the default user in this VM.

It's also possible that you're typing the wrong password or that the ssh keys are wrong (in case you're using them).

See more details at: http://code.google.com/p/mconf/wiki/MconfWebDeploymentManual#(2)_Deploy

















== Mconf-Mobile / BBB-Android ==

=== I can connect to the audio conference but I can't hear anything. What's wrong? ===

By default the application doesn't enable the loudspeaker (it enables the earphone speaker) - you need to press "Menu" and then "Loudspeaker" if you want to hear anything without put the phone next to your ear. The icon will turn enabled.

=== I can't join the voice conference ===

Mconf-Mobile communicates with other participants by voice using SIP over UDP through the port 5060. It means that the server must be able to receive connections on such port.

=== I downloaded the source code but the dependencies are not there ===

The instructions to build the Mconf-Mobile project is detailed [MconfMobile#Building_the_app_from_the_repository here]. All the dependencies are downloaded automatically when you run

{{{
ant build-all
}}}

=== On BigBlueButton 0.71a, how do I know if I installed mobile.jsp correctly? ===

Try to access the follow address:

{{{
http://<YOUR_SERVER>/bigbluebutton/demo/mobile.jsp
}}}

You should see a blank screen (no errors, no text, nothing else). If you don't, make sure you have followed correctly [MconfMobile#On_BigBlueButton_0.71a the instructions].

=== Voice connection timeout ===

Related to [http://code.google.com/p/bigbluebutton/issues/detail?id=1133 this issue].

Recently the default FreeSWITCH configuration on !BigBlueButton has changed in order to deny any attempt of connection from an external IP to FreeSWITCH directly. Unfortunetly it generated a side-effect for the Mconf-Mobile apps, since they connect to the voice conference directly through FreeSWITCH. It doesn't affect the web client because it joins the voice conference through a Red5 application.

So, basically you will not be able to connect to the voice conference on http://demo.bigbluebutton.org, but we have this default configuration ignored on https://mconf.org, so you will still be able to do it on the Mconf server.

Soon we will implement the voice handling on Mconf-Mobile to work under RTMP, so it will remove this inconvenient.